<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ForestRestore - App</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
    <!-- Auth Screen -->
    <div id="auth-screen" class="screen active">
        <div class="auth-container">
            <div class="logo">
                <i data-lucide="trees"></i>
                <h1>ForestRestore</h1>
            </div>
            <p class="tagline">Combat deforestation through smart replanting</p>
            
            <form id="auth-form" class="auth-form">
                <h2 id="auth-title">Sign In to Restore Forests</h2>
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" id="email" required placeholder="your@email.com">
                </div>
                <div class="form-group">
                    <label>Password</label>
                    <input type="password" id="password" required minlength="6" placeholder="Minimum 6 characters">
                </div>
                <button type="submit" id="auth-button" class="btn-primary">Sign In</button>
                <button type="button" id="toggle-auth" class="toggle-link">
                    Need an account? Join ForestRestore
                </button>
            </form>
        </div>
    </div>

    <!-- Dashboard Screen -->
    <div id="dashboard-screen" class="screen">
        <header class="header">
            <div class="header-content">
                <div class="logo">
                    <i data-lucide="trees"></i>
                    <h1>ForestRestore</h1>
                </div>
                <div class="user-menu">
                    <span id="dashboard-user-email"></span>
                    <button id="dashboard-logout-btn" class="btn-secondary">Logout</button>
                </div>
            </div>
        </header>

        <main class="main-content">
            <section class="hero">
                <h2>Welcome to ForestRestore</h2>
                <p>Choose where you'd like to go</p>
            </section>

            <section class="dashboard-actions">
                <div class="action-grid">
                    <div class="action-card" onclick="showScreen('home-screen')">
                        <i data-lucide="home"></i>
                        <h3>Home</h3>
                        <p>Learn about our mission</p>
                    </div>
                    
                    <div class="action-card" onclick="showScreen('about-screen')">
                        <i data-lucide="info"></i>
                        <h3>About</h3>
                        <p>How ForestRestore works</p>
                    </div>
                    
                    <div class="action-card" onclick="showScreen('services-screen')">
                        <i data-lucide="camera"></i>
                        <h3>Services</h3>
                        <p>Analyze deforestation</p>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Home Screen -->
    <div id="home-screen" class="screen">
        <header class="header">
            <div class="header-content">
                <div class="logo">
                    <i data-lucide="trees"></i>
                    <h1>ForestRestore</h1>
                </div>
                <div class="user-menu">
                    <button class="btn-secondary" onclick="showScreen('dashboard-screen')">Back to Dashboard</button>
                    <button class="btn-secondary" onclick="window.authManager.handleLogout()">Logout</button>
                </div>
            </div>
        </header>

        <main class="main-content">
            <section class="hero">
                <h2>Our Mission: Restoring Earth's Lungs</h2>
                <p>Fighting deforestation through technology-driven reforestation</p>
            </section>
            
            <div class="auth-form" style="max-width: 800px; margin: 2rem auto;">
                <h3>The Global Deforestation Crisis</h3>
                <p>Every year, we lose over 10 million hectares of forest - equivalent to 27 soccer fields every minute. This destruction threatens biodiversity, accelerates climate change, and displaces indigenous communities.</p>
                
                <div style="background: #f0fdf4; padding: 1.5rem; border-radius: 0.5rem; margin: 1.5rem 0;">
                    <h4 style="color: #0f766e; margin-bottom: 1rem;">Why Forests Matter:</h4>
                    <ul style="list-style: none; padding: 0;">
                        <li style="padding: 0.5rem 0; display: flex; align-items: center; gap: 0.5rem;">
                            <i data-lucide="cloud-rain" style="color: #10b981;"></i>
                            <span>Regulate global climate patterns</span>
                        </li>
                        <li style="padding: 0.5rem 0; display: flex; align-items: center; gap: 0.5rem;">
                            <i data-lucide="users" style="color: #10b981;"></i>
                            <span>Support 1.6 billion livelihoods</span>
                        </li>
                        <li style="padding: 0.5rem 0; display: flex; align-items: center; gap: 0.5rem;">
                            <i data-lucide="leaf" style="color: #10b981;"></i>
                            <span>Host 80% of terrestrial biodiversity</span>
                        </li>
                        <li style="padding: 0.5rem 0; display: flex; align-items: center; gap: 0.5rem;">
                            <i data-lucide="droplets" style="color: #10b981;"></i>
                            <span>Provide clean air and water filtration</span>
                        </li>
                    </ul>
                </div>

                <h4>Learn More About Deforestation:</h4>
                <div style="display: grid; gap: 1rem; margin: 1.5rem 0;">
                    <a href="https://www.worldwildlife.org/threats/deforestation-and-forest-degradation" 
                       target="_blank" 
                       style="display: flex; align-items: center; gap: 0.5rem; color: #10b981; text-decoration: none;">
                        <i data-lucide="external-link"></i>
                        WWF - Deforestation Threats and Solutions
                    <a href="https://www.un.org/sustainabledevelopment/biodiversity/" 
                       target="_blank" 
                        style="display: flex; align-items: center; gap: 0.5rem; color: #10b981; text-decoration: none;">
                        <i data-lucide="external-link"></i>
                          UN - Forests and Biodiversity
                         </a>
                    </a>
                    <a href="https://www.nationalgeographic.com/environment/article/deforestation" 
                       target="_blank" 
                       style="display: flex; align-items: center; gap: 0.5rem; color: #10b981; text-decoration: none;">
                        <i data-lucide="external-link"></i>
                        National Geographic - Deforestation Explained
                    </a>
                </div>
                 <div style="display: flex; gap: 1rem; margin-top: 2rem;">
                    <button class="btn-secondary" onclick="showScreen('dashboard-screen')">Back to Dashboard</button>
                </div>
            </div>
        </main>
    </div>

    <!-- About Screen -->
    <div id="about-screen" class="screen">
        <header class="header">
            <div class="header-content">
                <div class="logo">
                    <i data-lucide="trees"></i>
                    <h1>ForestRestore</h1>
                </div>
                <div class="user-menu">
                    <button class="btn-secondary" onclick="showScreen('dashboard-screen')">Back to Dashboard</button>
                    <button class="btn-secondary" onclick="window.authManager.handleLogout()">Logout</button>
                </div>
            </div>
        </header>

        <main class="main-content">
            <section class="hero">
                <h2>About ForestRestore</h2>
                <p>Revolutionizing forest restoration through AI and community action</p>
            </section>
            
            <div class="auth-form" style="max-width: 800px; margin: 2rem auto;">
                <h3>Why We're Doing This</h3>
                <p>ForestRestore was born from the urgent need to combat deforestation and restore our planet's vital ecosystems. We believe that technology can empower individuals and communities to take meaningful action in restoring forests and combating climate change.</p>

                <div style="background: #f0fdf4; padding: 1.5rem; border-radius: 0.5rem; margin: 1.5rem 0;">
                    <h4 style="color: #0f766e; margin-bottom: 1rem;">Our Restoration Goals:</h4>
                    <ul style="list-style: none; padding: 0;">
                        <li style="padding: 0.5rem 0; display: flex; align-items: center; gap: 0.5rem;">
                            <i data-lucide="target" style="color: #10b981;"></i>
                            <span>Restore soil health in deforested areas</span>
                        </li>
                        <li style="padding: 0.5rem 0; display: flex; align-items: center; gap: 0.5rem;">
                            <i data-lucide="heart" style="color: #10b981;"></i>
                            <span>Promote biodiversity through native species</span>
                        </li>
                        <li style="padding: 0.5rem 0; display: flex; align-items: center; gap: 0.5rem;">
                            <i data-lucide="globe" style="color: #10b981;"></i>
                            <span>Empower local communities in restoration efforts</span>
                        </li>
                        <li style="padding: 0.5rem 0; display: flex; align-items: center; gap: 0.5rem;">
                            <i data-lucide="trending-up" style="color: #10b981;"></i>
                            <span>Scale reforestation through accessible technology</span>
                        </li>
                    </ul>
                </div>

                <h3>How It Works</h3>
                <div style="display: grid; gap: 1.5rem; margin: 2rem 0;">
                    <div style="display: flex; align-items: center; gap: 1rem;">
                        <i data-lucide="camera" style="color: #10b981;"></i>
                        <div>
                            <strong>Upload Images</strong>
                            <p>Capture or upload photos of deforested areas using any device</p>
                        </div>
                    </div>
                    <div style="display: flex; align-items: center; gap: 1rem;">
                        <i data-lucide="brain" style="color: #10b981;"></i>
                        <div>
                            <strong>AI Analysis</strong>
                            <p>Our advanced AI analyzes soil conditions, erosion risk, and deforestation impact</p>
                        </div>
                    </div>
                    <div style="display: flex; align-items: center; gap: 1rem;">
                        <i data-lucide="sprout" style="color: #10b981;"></i>
                        <div>
                            <strong>Get Recommendations</strong>
                            <p>Receive tailored tree species recommendations for optimal restoration</p>
                        </div>
                    </div>
                    <div style="display: flex; align-items: center; gap: 1rem;">
                        <i data-lucide="map-pinned" style="color: #10b981;"></i>
                        <div>
                            <strong>Take Action</strong>
                            <p>Implement restoration with guided planting strategies and soil improvement techniques</p>
                        </div>
                    </div>
                </div>
                
                <div style="display: flex; gap: 1rem; margin-top: 2rem;">
                    <button class="btn-primary" onclick="showScreen('services-screen')">Try It Now</button>
                    <button class="btn-secondary" onclick="showScreen('dashboard-screen')">Back to Dashboard</button>
                </div>

                
            </div>
        </main>
    </div>

    <!-- Services Screen (Your original app) -->
    <div id="services-screen" class="screen">
        <header class="header">
            <div class="header-content">
                <div class="logo">
                    <i data-lucide="trees"></i>
                    <h1>ForestRestore</h1>
                </div>
                <div class="user-menu">
                    <button class="btn-secondary" onclick="showScreen('dashboard-screen')">Back to Dashboard</button>
                    <span id="user-email"></span>
                    <button id="logout-btn" class="btn-secondary">Logout</button>
                </div>
            </div>
        </header>

        <main class="main-content">
            <section class="hero">
                <h2>Restore Deforested Lands</h2>
                <p>Upload images of deforested areas to get AI-powered tree planting recommendations that restore soil health</p>
            </section>

            <section class="upload-section">
                <div class="upload-area" id="upload-area">
                    <div class="upload-content">
                        <i data-lucide="upload"></i>
                        <h3>Upload Deforestation Image</h3>
                        <p>Take or upload a photo of the deforested area</p>
                        <input type="file" id="file-input" accept="image/*" hidden>
                        <button class="btn-primary" onclick="document.getElementById('file-input').click()">
                            Choose Image
                        </button>
                    </div>
                </div>
                <div id="upload-preview" class="upload-preview hidden"></div>
            </section>

            <section class="camera-section">
                <div class="camera-container">
                    <h3><i data-lucide="camera"></i> Or Take Live Photo</h3>
                    
                    <div id="camera-preview" class="camera-preview hidden">
                        <video id="camera-video" autoplay playsinline></video>
                        <canvas id="camera-canvas" class="hidden"></canvas>
                    </div>
                    
                    <div class="camera-controls">
                        <button id="start-camera" class="btn-primary">
                            <i data-lucide="video"></i> Start Camera
                        </button>
                        <button id="capture-btn" class="btn-primary hidden">
                            <i data-lucide="camera"></i> Capture Photo
                        </button>
                        <button id="retake-btn" class="btn-secondary hidden">
                            <i data-lucide="refresh-cw"></i> Retake
                        </button>
                    </div>
                    
                    <div id="camera-result" class="camera-result hidden">
                        <img id="captured-image" alt="Captured deforestation photo">
                        <button id="analyze-capture" class="btn-primary">
                            <i data-lucide="search"></i> Analyze This Photo
                        </button>
                    </div>
                </div>
            </section>

            <section id="results-section" class="results-section hidden">
                <h3>Restoration Analysis</h3>
                
                <div class="analysis-card">
                    <h4><i data-lucide="alert-triangle"></i> Deforestation Impact</h4>
                    <div id="impact-analysis" class="impact-analysis"></div>
                </div>

                <div class="analysis-card">
                    <h4><i data-lucide="sprout"></i> Recommended Restoration Species</h4>
                    <div id="tree-recommendations" class="tree-grid"></div>
                </div>

                <div class="analysis-card">
                    <h4><i data-lucide="list-checks"></i> Immediate Actions</h4>
                    <div id="immediate-actions" class="actions-list"></div>
                </div>
            </section>

                <!-- Copyright Section -->
                <div style="text-align: center; margin-top: 3rem; padding-top: 2rem; border-top: 1px solid #f5f6f8; color: #f7f8fb;">
                    <p>&copy; 2025 ForestRestore. All rights reserved.</p>
                    <p>Established by Stacy Gakwa</p>
                    <p>Dedicated to global reforestation and ecological restoration</p>
                </div>
            </div>
        </main>
    </div>

    <script src="services.js"></script>
    <script src="auth.js"></script>
    <script src="app.js"></script>
</body>
</html>